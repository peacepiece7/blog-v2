# MDX로 블로그를 작성할 떄 고려할 점들

## 1번안 - MDX 파일을 직접 라우팅 할 경우

db를 사용하지 않고, next.js에서 mdx파일을 다이렉트로 라우팅 할 경우이다.

대략 이런 구조가 될 것이다.

```bash
src
├── app
│   ├── posts
│   │   ├── @contents
│   │   │   ├── example
│   │   │   │   ├── architecture
│   │   │   │   │   ├── page.mdx
│   │   │   │   ├── design
│   │   │   │   │   ├── page.mdx
│   │   │   │   ├── development
│   │   │   │   │   ├── page.mdx
│   │   │   │   ├── etc
│   │   │   │   │   ├── page.md
```

### 장점

- vscode 환경에서 코드를 작성할 수 있다.
- 커스터마이징이 수월하고 MDX내 컴포넌트를 사용할 수 있다. (이게 제일 크다고 봄)
- 데이터베이스, 이미지를 저장할 서박 필요하지 않기에 서버 비용이 절약된다.
- 포스팅을 하면서 개발을 할 수 있기 때문에, 작업 속도가 빠르다.
- SSG에 적합하다.

### 단점

- vscode를 실행하기까지 시간이 걸린다.
- DB가 없기 때문에 pagination, toc, search 기능을 구현하려면 모두 파일을 읽어와서 처리해야 한다.
- editor 화면을 만들경우 MDX내 컴포넌트를 삽입하는데 어려움이 있을 수 있다.
- metadata, frontmatter를 mdx에 직접 작성해줘야한다. (이건 장점일 수도 있음)
- 나중에 블로그를 이전할 경우, 마이그레이션에 어려움이 있다.
- 파일명으로 라우팅되기 때문에 한글 경로를 사용하기 어렵다.

## 2번안 - MDX 파일을 DB에 저장하고 라우팅 할 경우

MDX 파일을 DB에 저장하고, DB에서 라우팅하는 방법이다.

파일 서버와, 데이터베이스 서버가 따로 있는 전형적인 블로그/게시판 구조일 것이다.

```bash
src
├── app
│   ├── posts
│   │   ├── [:postid]
│   │   │   ├── page.tsx
```

파일이나 이미지를 저장하는 서버가 따로 없다면 다음과 같은 형태로 DB에서는 FileUniqueId만 관리할 수 있다.

```bash
src
├── app
│   ├── posts
│   │   ├── [:postid]
│   │   │   ├── page.tsx
│   │   document
│   │   │   ├── <FileUniqueId>.mdx
```

### 장점

- 한글 경로가 사용 가능하다.
- ISR, SSG, SSR 등 다양한 방법으로 상황에 맞게 렌더링 할 수 있다.
- 파일이 많아질 경우 관리가 용이하다.
- 웹에서 포스팅할 수 있다.

### 단점

- 서버 비용이 발생할 수 있다.
- 파일 내 컴포넌트를 삽입하기 어렵다. (컴포넌트의 위치나, 에러를 웹 에디터에서 확인하기 어렵기 떄문에)
